# 채팅 위젯 문제 해결 가이드

## 타임아웃 오류 해결

### 증상
```
❌ 요청 시간이 초과되었습니다. 네트워크 연결을 확인하고 다시 시도해주세요.
```

### 원인
1. DeepSeek API 응답 시간이 길어서 타임아웃 발생
2. 네트워크 지연
3. 질문이 너무 복잡하거나 길어서 처리 시간 증가

### 해결 방법

#### 1. 질문 최적화
- 질문을 더 구체적이고 간결하게 작성
- 한 번에 하나의 주제만 질문
- 예시:
  - ❌ "오늘 devsecops 트렌드 조사해줘."
  - ✅ "2025년 DevSecOps 주요 트렌드 3가지를 간단히 설명해주세요."

#### 2. 재시도
- 타임아웃 발생 시 "🔄 다시 시도" 버튼 클릭
- 또는 잠시 후 다시 질문

#### 3. 설정 확인
현재 타임아웃 설정:
- 서버: 9초
- 클라이언트: 12초
- 최대 토큰: 1200 (응답 시간 단축)

### 개선 사항

#### 적용된 최적화
1. ✅ 타임아웃 증가: 8초 → 9초 (서버)
2. ✅ 토큰 수 감소: 1500 → 1200 (응답 시간 단축)
3. ✅ 시스템 프롬프트 개선: 간결한 답변 요청
4. ✅ 재시도 버튼 추가 (네트워크 오류 시)
5. ✅ 더 나은 에러 메시지

#### 추가 권장사항
1. **질문 분할**: 복잡한 질문을 여러 개로 나누기
2. **키워드 사용**: 핵심 키워드만 포함
3. **재시도**: 타임아웃 발생 시 즉시 재시도

## 기타 오류

### 429 오류 (Rate Limit)
- **원인**: 너무 많은 요청 (10회/분 제한)
- **해결**: 1분 후 다시 시도

### 503 오류 (서비스 사용 불가)
- **원인**: API 키 미설정 또는 DeepSeek 서비스 문제
- **해결**: 
  1. Vercel 환경 변수 확인
  2. DeepSeek API 상태 확인
  3. 잠시 후 재시도

### 504 오류 (Gateway Timeout)
- **원인**: 응답 생성 시간 초과
- **해결**: 질문을 더 간결하게 작성

## 성능 최적화 팁

1. **짧은 질문**: 응답 시간 단축
2. **구체적인 질문**: 더 빠른 답변 생성
3. **키워드 중심**: 핵심만 포함

## 모니터링

Vercel 로그에서 확인:
```bash
./scripts/check-vercel-logs.sh
```

또는:
```bash
vercel logs https://tech.2twodragon.com
```
