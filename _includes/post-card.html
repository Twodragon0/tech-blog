{% assign post = include.post %}
<article class="post-card card">
  <a href="{{ post.url | relative_url }}" class="post-card-inner">
    <div class="post-card-meta">
      {% comment %} Get category - handle both string and array formats {% endcomment %}
      {% assign display_cat = nil %}
      {% if post.category and post.category != "" %}
        {% assign display_cat = post.category %}
      {% elsif post.categories %}
        {% assign cat_type = post.categories | first %}
        {% if cat_type.size == 1 %}
          {% comment %} It's a string (first returns single char) {% endcomment %}
          {% assign display_cat = post.categories %}
        {% else %}
          {% comment %} It's an array {% endcomment %}
          {% assign display_cat = post.categories | first %}
        {% endif %}
      {% endif %}

      {% if display_cat and display_cat != "" %}
      <span class="category-badge {{ display_cat | downcase | replace: ' ', '-' }}">{{ display_cat }}</span>
      {% endif %}
      <time datetime="{{ post.date | date_to_xmlschema }}">
        {{ post.date | date: "%Y. %m. %d" }}
      </time>
    </div>

    <h2 class="post-card-title">{{ post.title | escape }}</h2>

    {% if post.excerpt %}
    <p class="post-card-excerpt">{{ post.excerpt | strip_html | strip_newlines | truncate: 150 }}</p>
    {% endif %}

    {% if post.tags.size > 0 %}
    <div class="post-card-tags">
      {% for tag in post.tags limit:3 %}
      <span class="tag">{{ tag }}</span>
      {% endfor %}
    </div>
    {% endif %}
  </a>
</article>
